<!doctype html>
<html>
  <head>
    <title>Mapa con Marcadores y Tweets</title>
    <script>
      let map;
      const firebaseConfig = {
        apiKey: "AIzaSyA94W_iBzKYoglvT8BK3sh96ydkMLdLqsI",
        authDomain: "venezuelalibre9e.firebaseapp.com",
        projectId: "venezuelalibre9e",
        storageBucket: "venezuelalibre9e.appspot.com",
        messagingSenderId: "YOUR_SENDER_ID",
        appId: "YOUR_APP_ID"
      };

      firebase.initializeApp(firebaseConfig);
      const db = firebase.firestore();

      function initMap() {
        map = new google.maps.Map(document.getElementById("map"), {
          center: { lat: 8.0, lng: -66.0 },
          zoom: 6,
        });

        db.collection("markers").get().then((querySnapshot) => {
          querySnapshot.forEach((doc) => {
            const data = doc.data();
            const marker = new google.maps.Marker({
              position: { lat: data.lat, lng: data.lng },
              map,
              title: data.title,
            });

            const infoWindow = new google.maps.InfoWindow({
              content: `<div><h1>${data.title}</h1><p>${data.content}</p><a href='${data.url}' target='_blank'>Ver en Twitter</a></div>`
            });

            marker.addListener("click", () => {
              infoWindow.open(map, marker);
            });
          });
        });
      }
    </script>
    <style>
      #map {
        height: 100%;
      }

      html, body {
        height: 100%;
        margin: 0;
        padding: 0;
      }

      h1 {
        text-align: center;
        font-family: Arial, sans-serif;
      }
    </style>
  </head>
  <body>
    <h1>Mapa con Informaci√≥n de Marcadores</h1>
    <div id="map"></div>
    <script
      src="https://maps.googleapis.com/maps/api/js?key=AIzaSyA94W_iBzKYoglvT8BK3sh96ydkMLdLqsI&callback=initMap"
      async
    ></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-firestore.js"></script>
  </body>
</html>